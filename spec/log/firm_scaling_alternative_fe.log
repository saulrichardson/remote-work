-----------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/saul/Dropbox/Remote Work Startups/main/spec/log/firm_scaling_alternative_fe.log
  log type:  text
 opened on:  28 May 2025, 05:09:29

. 
. // 0) Setup environment
. do "../src/globals.do"

. global raw_data "../data/raw"

. global processed_data  "../data/processed"

. global results "../results/raw"

. global clean_results "../results/cleaned"

. 
. 
. 
end of do-file

. 
. // 1) Common settings
. local result_dir "$results/`specname'"

. capture mkdir "`result_dir'"

. 
. local outcomes    growth_rate_we join_rate_we leave_rate_we

. 
. *--- main results -------------------------------------------------------------
. tempfile out  

. capture postclose handle

. postfile handle ///
>     str40   model_type          ///
>     str40   fe_tag              ///
>     str40  outcome             ///
>     str40  param               ///
>     double coef se pval pre_mean ///
>     double rkf nobs            ///
>     using `out', replace
(file /var/folders/hg/s3xm9w393gxby64_zklmhgbc0000gn/T//S_39148.000001 not found)

. 
. 
. *--- first-stage results (coefficients + diagnostics) -------------------------
. tempfile out_fs

. capture postclose handle_fs

. postfile handle_fs ///
>     str8   fe_tag              ///  "fyh", "time", "firm", "none"
>     str20  outcome             ///
>     str8   endovar             ///  "var3" / "var5"
>     str40  param               ///  var6 / var7 / var4
>     double coef se pval        ///
>     double partialF rkf nobs   ///
>     using `out_fs', replace
(file /var/folders/hg/s3xm9w393gxby64_zklmhgbc0000gn/T//S_39148.000002 not found)

. 
. //-------------------------------------------------------------
. //  Firm × year FE ("fyh")
. //-------------------------------------------------------------
. local feopt "absorb(firm_id yh)"

. local tag   "fyh"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3.     display as text ">> FE spec: firm×year  (tag=`tag')"
  4.     display as text "   – outcome: `y'"
  5. 
.     summarize `y' if covid == 0, meanonly
  6.     local pre_mean = r(mean)
  7. 
.     // OLS
.      reghdfe `y' var3 var5 var4, ///
>         `feopt' vce(cluster firm_id)
  8.                 
.         local N = e(N)  
  9.         
.     foreach p in var3 var5 var4 {
 10.         local b    = _b[`p']
 11.         local se   = _se[`p']
 12.         local t    = `b'/`se'
 13.         local pval = 2*ttail(e(df_r), abs(`t'))
 14. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 15.     }
 16. 
.     // IV (2nd stage)
.      ivreghdfe ///
>         `y' (var3 var5 = var6 var7) var4, ///
>         `feopt' vce(cluster firm_id) savefirst
 17.     
.         local rkf = e(rkf)
 18.         local N = e(N)  
 19.         
.     foreach p in var3 var5 var4 {
 20.         local b    = _b[`p']
 21.         local se   = _se[`p']
 22.         local t    = `b'/`se'
 23.         local pval = 2*ttail(e(df_r), abs(`t'))
 24.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 25.     }
 26.         
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 27.         local F3 = FS[4,1]
 28.         local F5 = FS[4,2]
 29. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 30.         local N_fs = e(N)
 31. 
.         foreach p in var6 var7 var4 {
 32.                 local b    = _b[`p']
 33.                 local se   = _se[`p']
 34.                 local t    = `b'/`se'
 35.                 local pval = 2*ttail(e(df_r), abs(`t'))
 36. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 37.         }
 38. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 39.         local N_fs = e(N)
 40. 
.         foreach p in var6 var7 var4 {
 41.                 local b    = _b[`p']
 42.                 local se   = _se[`p']
 43.                 local t    = `b'/`se'
 44.                 local pval = 2*ttail(e(df_r), abs(`t'))
 45. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 46.         }
 47. 
. }
>> FE spec: firm×year  (tag=fyh)
   – outcome: growth_rate_we
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 2 HDFE groups                           F(   3,   3507) =      24.67
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3488
                                                  Adj R-squared   =     0.2892
                                                  Within R-sq.    =     0.0055
Number of clusters (firm_id) =      3,508         Root MSE        =     0.1853

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0032223   .0046965     0.69   0.493    -.0059859    .0124305
        var5 |   .0699523   .0236946     2.95   0.003     .0234957     .116409
        var4 |   -.117261   .0211647    -5.54   0.000    -.1587573   -.0757646
       _cons |   .0998093   .0012425    80.33   0.000     .0973732    .1022453
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  3,  3507) =    22.94
                                                      Prob > F      =   0.0000
Total (centered) SS     =   1327.10484                Centered R2   =   0.0022
Total (uncentered) SS   =   1327.10484                Uncentered R2 =   0.0022
Residual SS             =  1324.192664                Root MSE      =    .1776

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0057809   .0093488     0.62   0.536    -.0125488    .0241105
        var5 |   .2088021   .1017564     2.05   0.040     .0092944    .4083098
        var4 |   -.236576   .0865024    -2.73   0.006     -.406176    -.066976
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.072
                         (Kleibergen-Paap rk Wald F statistic):         16.530
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=fyh)
   – outcome: join_rate_we
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 2 HDFE groups                           F(   3,   3507) =      16.09
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4474
                                                  Adj R-squared   =     0.3968
                                                  Within R-sq.    =     0.0039
Number of clusters (firm_id) =      3,508         Root MSE        =     0.1825

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0115876   .0047489     2.44   0.015     .0022767    .0208986
        var5 |   .0499891   .0255344     1.96   0.050    -.0000747     .100053
        var4 |  -.0917713   .0229648    -4.00   0.000    -.1367969   -.0467456
       _cons |   .2215334   .0012685   174.64   0.000     .2190464    .2240205
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  3,  3507) =    19.32
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1286.526586                Centered R2   =  -0.0044
Total (uncentered) SS   =  1286.526586                Uncentered R2 =  -0.0044
Residual SS             =   1292.12859                Root MSE      =    .1755

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |    .041513   .0097864     4.24   0.000     .0223253    .0607007
        var5 |   .2280918   .1118871     2.04   0.042     .0087214    .4474622
        var4 |  -.2524649   .0954801    -2.64   0.008    -.4396672   -.0652627
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.072
                         (Kleibergen-Paap rk Wald F statistic):         16.530
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=fyh)
   – outcome: leave_rate_we
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 2 HDFE groups                           F(   3,   3507) =      29.72
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9178
                                                  Adj R-squared   =     0.9103
                                                  Within R-sq.    =     0.0042
Number of clusters (firm_id) =      3,508         Root MSE        =     0.0865

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0157066   .0024799     6.33   0.000     .0108445    .0205687
        var5 |  -.0129816   .0114508    -1.13   0.257    -.0354325    .0094693
        var4 |   .0281589    .010186     2.76   0.006     .0081879    .0481299
       _cons |   .2141062   .0006591   324.85   0.000     .2128139    .2153984
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  3,  3507) =    47.95
                                                      Prob > F      =   0.0000
Total (centered) SS     =   289.094656                Centered R2   =  -0.0162
Total (uncentered) SS   =   289.094656                Uncentered R2 =  -0.0162
Residual SS             =  293.7884509                Root MSE      =   .08367

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0508551   .0052991     9.60   0.000     .0404655    .0612447
        var5 |   .0924074   .0577613     1.60   0.110    -.0208418    .2056565
        var4 |  -.0719351   .0496241    -1.45   0.147    -.1692301      .02536
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.072
                         (Kleibergen-Paap rk Wald F statistic):         16.530
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. //-------------------------------------------------------------
. // Time FE ("time")
. //-------------------------------------------------------------
. local feopt "absorb(yh)"

. local tag   "time"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3. 
.         gen var8 = remote * startup
  4.         gen var9 = teleworkable*startup
  5. 
.     summarize `y' if covid == 0, meanonly
  6.     local pre_mean = r(mean)
  7. 
.     summarize `y' if covid == 0, meanonly
  8.     local pre_mean = r(mean)
  9.         
.     display as text ">> FE spec: time  (tag=`tag')"
 10.     display as text "   – outcome: `y'"
 11. 
.     // OLS
.     reghdfe `y' var3 var5 var4 remote startup var8 covid, ///
>         `feopt' vce(cluster firm_id)
 12.         local N   = e(N)
 13.         
.     foreach p in var3 var5 var4 {
 14.         local b    = _b[`p']
 15.         local se   = _se[`p']
 16.         local t    = `b'/`se'
 17.         local pval = 2*ttail(e(df_r), abs(`t'))
 18. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 19.     }
 20. 
.     // IV (2nd stage)
.      ivreghdfe ///
>         `y' (var3 var5 var8 remote = var6 var7 var9 teleworkable) var4 startup covid, ///
>         `feopt' vce(cluster firm_id) savefirst
 21.                 
.     local rkf = e(rkf)
 22.         local N   = e(N)
 23.         
.     foreach p in var3 var5 var4 {
 24.         local b    = _b[`p']
 25.         local se   = _se[`p']
 26.         local t    = `b'/`se'
 27.         local pval = 2*ttail(e(df_r), abs(`t'))
 28.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 29.     }
 30. 
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 31.         local F3 = FS[4,1]
 32.         local F5 = FS[4,2]
 33. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 34.         local N_fs = e(N)
 35. 
.         foreach p in var6 var7 var4 {
 36.                 local b    = _b[`p']
 37.                 local se   = _se[`p']
 38.                 local t    = `b'/`se'
 39.                 local pval = 2*ttail(e(df_r), abs(`t'))
 40. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 41.         }
 42. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 43.         local N_fs = e(N)
 44. 
.         foreach p in var6 var7 var4 {
 45.                 local b    = _b[`p']
 46.                 local se   = _se[`p']
 47.                 local t    = `b'/`se'
 48.                 local pval = 2*ttail(e(df_r), abs(`t'))
 49. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 50.         }
 51. 
. }
>> FE spec: time  (tag=time)
   – outcome: growth_rate_we
(MWFE estimator converged in 1 iterations)
note: covid is probably collinear with the fixed effects (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   6,   3507) =     186.05
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1151
                                                  Adj R-squared   =     0.1147
                                                  Within R-sq.    =     0.0915
Number of clusters (firm_id) =      3,508         Root MSE        =     0.2067

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |    .004299   .0047528     0.90   0.366    -.0050196    .0136176
        var5 |   .0657488   .0237122     2.77   0.006     .0192578    .1122399
        var4 |  -.1115675   .0211614    -5.27   0.000    -.1530574   -.0700776
      remote |   .0509947   .0051925     9.82   0.000     .0408141    .0611753
     startup |   .2281365    .021367    10.68   0.000     .1862436    .2700294
        var8 |  -.0911639   .0234642    -3.89   0.000    -.1371688   -.0451591
       covid |          0  (omitted)
       _cons |   .0293244   .0022782    12.87   0.000     .0248577    .0337911
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          yh |        12           0          12     |
-----------------------------------------------------+
(MWFE estimator converged in 1 iterations)

Stored estimation results
-------------------------
-----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+---------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_var8 | ivreg2         var8          7  First-stage regression: var8
_ivreg2_re~e | ivreg2       remote          7  First-stage regression: remote
-----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  6,  3507) =   181.23
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1974.045857                Centered R2   =   0.0802
Total (uncentered) SS   =  1974.045857                Uncentered R2 =   0.0802
Residual SS             =  1815.655998                Root MSE      =     .208

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0078415   .0094463     0.83   0.407    -.0106793    .0263623
        var5 |   .2035665   .1008976     2.02   0.044     .0057426    .4013904
        var8 |  -.1714171   .0831311    -2.06   0.039    -.3344072   -.0084269
      remote |   .1056587   .0095943    11.01   0.000     .0868478    .1244697
        var4 |  -.2302732   .0855631    -2.69   0.007    -.3980318   -.0625146
     startup |   .2809664   .0711138     3.95   0.000     .1415377    .4203951
       covid |          0  (omitted)
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.495
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              688.848
                         (Kleibergen-Paap rk Wald F statistic):          8.256
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Warning: estimated covariance matrix of moment conditions not of full rank.
         overidentification statistic not reported, and standard errors and
         model tests should be interpreted with caution.
Possible causes:
         number of clusters insufficient to calculate robust covariance matrix
         singleton dummy variable (dummy with one 1 and N-1 0s or vice versa)
partial option may address problem.
------------------------------------------------------------------------------
Collinearities detected among instruments: 1 instrument(s) dropped
Instrumented:         var3 var5 var8 remote
Included instruments: var4 startup covid
Excluded instruments: var6 var7 var9 teleworkable
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          yh |        12           0          12     |
-----------------------------------------------------+
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: time  (tag=time)
   – outcome: join_rate_we
(MWFE estimator converged in 1 iterations)
note: covid is probably collinear with the fixed effects (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   6,   3507) =     230.44
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1621
                                                  Adj R-squared   =     0.1618
                                                  Within R-sq.    =     0.1277
Number of clusters (firm_id) =      3,508         Root MSE        =     0.2152

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0123824   .0047979     2.58   0.010     .0029755    .0217893
        var5 |   .0420248   .0252939     1.66   0.097    -.0075675    .0916171
        var4 |  -.0824972    .022709    -3.63   0.000    -.1270213    -.037973
      remote |   .0652205    .006084    10.72   0.000     .0532919    .0771491
     startup |   .2507259     .02444    10.26   0.000     .2028078     .298644
        var8 |  -.0839468     .02671    -3.14   0.002    -.1363155   -.0315781
       covid |          0  (omitted)
       _cons |   .1348462   .0029921    45.07   0.000     .1289798    .1407125
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          yh |        12           0          12     |
-----------------------------------------------------+
(MWFE estimator converged in 1 iterations)

Stored estimation results
-------------------------
-----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+---------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_var8 | ivreg2         var8          7  First-stage regression: var8
_ivreg2_re~e | ivreg2       remote          7  First-stage regression: remote
-----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  6,  3507) =   214.48
                                                      Prob > F      =   0.0000
Total (centered) SS     =   2227.51312                Centered R2   =   0.1105
Total (uncentered) SS   =   2227.51312                Uncentered R2 =   0.1105
Residual SS             =  1981.319525                Root MSE      =    .2173

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0429007   .0098766     4.34   0.000     .0235363    .0622651
        var5 |   .2139285   .1123581     1.90   0.057    -.0063654    .4342225
        var8 |  -.2276728    .101079    -2.25   0.024    -.4258524   -.0294932
      remote |   .1250343   .0120357    10.39   0.000     .1014367     .148632
        var4 |  -.2379891   .0957461    -2.49   0.013    -.4257128   -.0502654
     startup |   .3562262   .0865531     4.12   0.000     .1865268    .5259257
       covid |          0  (omitted)
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.495
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              688.848
                         (Kleibergen-Paap rk Wald F statistic):          8.256
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Warning: estimated covariance matrix of moment conditions not of full rank.
         overidentification statistic not reported, and standard errors and
         model tests should be interpreted with caution.
Possible causes:
         number of clusters insufficient to calculate robust covariance matrix
         singleton dummy variable (dummy with one 1 and N-1 0s or vice versa)
partial option may address problem.
------------------------------------------------------------------------------
Collinearities detected among instruments: 1 instrument(s) dropped
Instrumented:         var3 var5 var8 remote
Included instruments: var4 startup covid
Excluded instruments: var6 var7 var9 teleworkable
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          yh |        12           0          12     |
-----------------------------------------------------+
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: time  (tag=time)
   – outcome: leave_rate_we
(MWFE estimator converged in 1 iterations)
note: covid is probably collinear with the fixed effects (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   6,   3507) =     116.09
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.8692
                                                  Adj R-squared   =     0.8691
                                                  Within R-sq.    =     0.0496
Number of clusters (firm_id) =      3,508         Root MSE        =     0.1045

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0155967    .002505     6.23   0.000     .0106853     .020508
        var5 |  -.0145453   .0108902    -1.34   0.182     -.035897    .0068064
        var4 |   .0295018   .0096073     3.07   0.002     .0106653    .0483383
      remote |    .020025   .0031414     6.37   0.000     .0138659    .0261842
     startup |   .0389794   .0105066     3.71   0.000     .0183797    .0595792
        var8 |  -.0056783   .0118309    -0.48   0.631    -.0288745    .0175179
       covid |          0  (omitted)
       _cons |   .1928528   .0016673   115.67   0.000     .1895839    .1961217
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          yh |        12           0          12     |
-----------------------------------------------------+
(MWFE estimator converged in 1 iterations)

Stored estimation results
-------------------------
-----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+---------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_var8 | ivreg2         var8          7  First-stage regression: var8
_ivreg2_re~e | ivreg2       remote          7  First-stage regression: remote
-----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  6,  3507) =   112.51
                                                      Prob > F      =   0.0000
Total (centered) SS     =  482.1615467                Centered R2   =   0.0274
Total (uncentered) SS   =  482.1615467                Uncentered R2 =   0.0274
Residual SS             =  468.9412967                Root MSE      =    .1057

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0505737   .0054092     9.35   0.000     .0399681    .0611792
        var5 |   .0911564   .0543016     1.68   0.093    -.0153095    .1976224
        var8 |  -.1125027   .0517332    -2.17   0.030     -.213933   -.0110724
      remote |   .0310527   .0068958     4.50   0.000     .0175324    .0445729
        var4 |  -.0707097    .046601    -1.52   0.129    -.1620776    .0206581
     startup |   .1269485   .0442516     2.87   0.004      .040187    .2137101
       covid |          0  (omitted)
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.495
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              688.848
                         (Kleibergen-Paap rk Wald F statistic):          8.256
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Warning: estimated covariance matrix of moment conditions not of full rank.
         overidentification statistic not reported, and standard errors and
         model tests should be interpreted with caution.
Possible causes:
         number of clusters insufficient to calculate robust covariance matrix
         singleton dummy variable (dummy with one 1 and N-1 0s or vice versa)
partial option may address problem.
------------------------------------------------------------------------------
Collinearities detected among instruments: 1 instrument(s) dropped
Instrumented:         var3 var5 var8 remote
Included instruments: var4 startup covid
Excluded instruments: var6 var7 var9 teleworkable
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          yh |        12           0          12     |
-----------------------------------------------------+
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. //-------------------------------------------------------------
. // Firm FE ("firm")
. //-------------------------------------------------------------
. local feopt "absorb(firm_id)"

. local tag   "firm"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3. 
.     summarize `y' if covid == 0, meanonly
  4.     local pre_mean = r(mean)
  5. 
.     display as text ">> FE spec: firm  (tag=`tag')"
  6.     display as text "   – outcome: `y'"
  7. 
.     // OLS
.      reghdfe `y' var3 var5 var4 covid, ///
>         `feopt' vce(cluster firm_id)
  8.         
.         local N   = e(N)
  9.         
.     foreach p in var3 var5 var4 {
 10.         local b    = _b[`p']
 11.         local se   = _se[`p']
 12.         local t    = `b'/`se'
 13.         local pval = 2*ttail(e(df_r), abs(`t'))
 14. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 15.     }
 16. 
.     // IV (2nd stage)
.      ivreghdfe ///
>         `y' (var3 var5 = var6 var7) var4 covid, ///
>         `feopt' vce(cluster firm_id) savefirst
 17.                 
.     local rkf = e(rkf)
 18.         local N   = e(N)
 19.         
.     foreach p in var3 var5 var4 {
 20.         local b    = _b[`p']
 21.         local se   = _se[`p']
 22.         local t    = `b'/`se'
 23.         local pval = 2*ttail(e(df_r), abs(`t'))
 24.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 25.     }
 26. 
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 27.         local F3 = FS[4,1]
 28.         local F5 = FS[4,2]
 29. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 30.         local N_fs = e(N)
 31. 
.         foreach p in var6 var7 var4 {
 32.                 local b    = _b[`p']
 33.                 local se   = _se[`p']
 34.                 local t    = `b'/`se'
 35.                 local pval = 2*ttail(e(df_r), abs(`t'))
 36. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 37.         }
 38. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 39.         local N_fs = e(N)
 40. 
.         foreach p in var6 var7 var4 {
 41.                 local b    = _b[`p']
 42.                 local se   = _se[`p']
 43.                 local t    = `b'/`se'
 44.                 local pval = 2*ttail(e(df_r), abs(`t'))
 45. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 46.         }
 47. 
. }
>> FE spec: firm  (tag=firm)
   – outcome: growth_rate_we
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   4,   3507) =     155.82
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3336
                                                  Adj R-squared   =     0.2728
                                                  Within R-sq.    =     0.0223
Number of clusters (firm_id) =      3,508         Root MSE        =     0.1874

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |    .003235   .0046961     0.69   0.491    -.0059724    .0124424
        var5 |   .0698647   .0236843     2.95   0.003     .0234283     .116301
        var4 |  -.1170925   .0211542    -5.54   0.000    -.1585682   -.0756167
       covid |  -.0358615   .0023558   -15.22   0.000    -.0404804   -.0312427
       _cons |   .1147541   .0009306   123.32   0.000     .1129296    .1165786
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 1 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          4  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          4  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  4,  3507) =   137.52
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1381.300006                Centered R2   =   0.0191
Total (uncentered) SS   =  1381.300006                Uncentered R2 =   0.0191
Residual SS             =  1354.886665                Root MSE      =    .1797

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0058267   .0093509     0.62   0.533     -.012507    .0241603
        var5 |   .2091004   .1017974     2.05   0.040     .0095123    .4086884
        var4 |  -.2367466   .0865343    -2.74   0.006    -.4064093   -.0670839
       covid |  -.0373309   .0049056    -7.61   0.000    -.0469491   -.0277127
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.364
                         (Kleibergen-Paap rk Wald F statistic):         16.533
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4 covid
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm  (tag=firm)
   – outcome: join_rate_we
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   4,   3507) =     277.03
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4236
                                                  Adj R-squared   =     0.3710
                                                  Within R-sq.    =     0.0313
Number of clusters (firm_id) =      3,508         Root MSE        =     0.1864

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0115889   .0047491     2.44   0.015     .0022776    .0209001
        var5 |   .0499027   .0255257     1.95   0.051    -.0001441    .0999494
        var4 |   -.091618   .0229561    -3.99   0.000    -.1366268   -.0466093
       covid |  -.0564605   .0024959   -22.62   0.000     -.061354   -.0515669
       _cons |   .2450747   .0009408   260.50   0.000     .2432301    .2469192
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 1 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          4  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          4  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  4,  3507) =   250.37
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1379.884717                Centered R2   =   0.0236
Total (uncentered) SS   =  1379.884717                Uncentered R2 =   0.0236
Residual SS             =  1347.368716                Root MSE      =    .1792

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0415551   .0097895     4.24   0.000     .0223615    .0607488
        var5 |   .2289421   .1119846     2.04   0.041     .0093805    .4485038
        var4 |  -.2531235   .0955651    -2.65   0.008    -.4404922   -.0657548
       covid |  -.0734502   .0052613   -13.96   0.000    -.0837658   -.0631347
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.364
                         (Kleibergen-Paap rk Wald F statistic):         16.533
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4 covid
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm  (tag=firm)
   – outcome: leave_rate_we
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   4,   3507) =    9933.67
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1596
                                                  Adj R-squared   =     0.0829
                                                  Within R-sq.    =     0.1102
Number of clusters (firm_id) =      3,508         Root MSE        =     0.2767

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0159231   .0024696     6.45   0.000      .011081    .0207651
        var5 |   -.012964   .0114164    -1.14   0.256    -.0353475    .0094195
        var4 |   .0278102   .0101382     2.74   0.006     .0079328    .0476876
       covid |   .1745495   .0015162   115.13   0.000     .1715768    .1775222
       _cons |    .141278   .0004503   313.77   0.000     .1403952    .1421608
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 1 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          4  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          4  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  4,  3507) =  8955.21
                                                      Prob > F      =   0.0000
Total (centered) SS     =  3309.059778                Centered R2   =   0.1087
Total (uncentered) SS   =  3309.059778                Uncentered R2 =   0.1087
Residual SS             =  2949.419815                Root MSE      =    .2651

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0509066   .0052983     9.61   0.000     .0405186    .0612946
        var5 |   .0799357   .0554458     1.44   0.149    -.0287737     .188645
        var4 |  -.0615703   .0476219    -1.29   0.196    -.1549397    .0317991
       covid |   .1547151   .0029872    51.79   0.000     .1488582     .160572
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.364
                         (Kleibergen-Paap rk Wald F statistic):         16.533
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4 covid
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. //-------------------------------------------------------------
. // No FE ("none")
. //-------------------------------------------------------------
. local feopt ""

. local tag   "none"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3.         
.         gen var8 = remote * startup
  4.         gen var9 = teleworkable*startup
  5.         
.     display as text ">> FE spec: none  (tag=`tag')"
  6.     display as text "   – outcome: `y'"
  7. 
.     // OLS
.     reghdfe `y' var3 var5 var4 remote startup var8 covid, ///
>         absorb() vce(cluster firm_id)
  8.                 
.         local N   = e(N)
  9.         
.     foreach p in var3 var5 var4 {
 10.         local b    = _b[`p']
 11.         local se   = _se[`p']
 12.         local t    = `b'/`se'
 13.         local pval = 2*ttail(e(df_r), abs(`t'))
 14. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 15.     }
 16. 
.     // IV (2nd stage)
.     ivreghdfe ///
>         `y' (var3 var5 var8 remote = var6 var7 var9 teleworkable) var4 startup covid, ///
>         absorb() vce(cluster firm_id) savefirst
 17.     local rkf = e(rkf)
 18.         local N   = e(N)
 19.         
.     foreach p in var3 var5 var4 {
 20.         local b    = _b[`p']
 21.         local se   = _se[`p']
 22.         local t    = `b'/`se'
 23.         local pval = 2*ttail(e(df_r), abs(`t'))
 24.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 25.     }
 26. 
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 27.         local F3 = FS[4,1]
 28.         local F5 = FS[4,2]
 29. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 30.         local N_fs = e(N)
 31. 
.         foreach p in var6 var7 var4 {
 32.                 local b    = _b[`p']
 33.                 local se   = _se[`p']
 34.                 local t    = `b'/`se'
 35.                 local pval = 2*ttail(e(df_r), abs(`t'))
 36. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 37.         }
 38. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 39.         local N_fs = e(N)
 40. 
.         foreach p in var6 var7 var4 {
 41.                 local b    = _b[`p']
 42.                 local se   = _se[`p']
 43.                 local t    = `b'/`se'
 44.                 local pval = 2*ttail(e(df_r), abs(`t'))
 45. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 46.         }
 47. 
. }
>> FE spec: none  (tag=none)
   – outcome: growth_rate_we
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   7,   3507) =     259.25
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1001
                                                  Adj R-squared   =     0.1000
                                                  Within R-sq.    =     0.1001
Number of clusters (firm_id) =      3,508         Root MSE        =     0.2085

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0043028   .0047526     0.91   0.365    -.0050152    .0136209
        var5 |   .0658076    .023695     2.78   0.006     .0193501     .112265
        var4 |  -.1115567    .021144    -5.28   0.000    -.1530125   -.0701008
      remote |   .0509845   .0051915     9.82   0.000     .0408059    .0611631
     startup |   .2281433   .0213476    10.69   0.000     .1862884    .2699982
        var8 |  -.0912396   .0234434    -3.89   0.000    -.1372038   -.0452755
       covid |  -.0359967   .0023612   -15.25   0.000    -.0406261   -.0313673
       _cons |   .0443523   .0028129    15.77   0.000     .0388371    .0498674
------------------------------------------------------------------------------

Stored estimation results
-------------------------
-----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+---------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          8  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          8  First-stage regression: var5
_ivreg2_var8 | ivreg2         var8          8  First-stage regression: var8
_ivreg2_re~e | ivreg2       remote          8  First-stage regression: remote
-----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  7,  3507) =   229.35
                                                      Prob > F      =   0.0000
Total (centered) SS     =  2026.703663                Centered R2   =   0.0891
Total (uncentered) SS   =  2403.027864                Uncentered R2 =   0.2318
Residual SS             =  1846.035634                Root MSE      =    .2097

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0078699   .0094455     0.83   0.405     -.010643    .0263829
        var5 |   .2045402   .1008798     2.03   0.043     .0068195    .4022609
        var8 |  -.1718476   .0830119    -2.07   0.038    -.3345479   -.0091473
      remote |   .1056287   .0095908    11.01   0.000      .086831    .1244264
        var4 |  -.2310506    .085545    -2.70   0.007    -.3987158   -.0633854
     startup |   .2812817   .0710059     3.96   0.000     .1421127    .4204506
       covid |  -.0380266   .0049305    -7.71   0.000    -.0476902    -.028363
       _cons |   .0133611   .0051265     2.61   0.009     .0033133     .023409
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.495
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              689.027
                         (Kleibergen-Paap rk Wald F statistic):          8.258
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var8 remote
Included instruments: var4 startup covid
Excluded instruments: var6 var7 var9 teleworkable
------------------------------------------------------------------------------
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: none  (tag=none)
   – outcome: join_rate_we
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   7,   3507) =     386.68
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1385
                                                  Adj R-squared   =     0.1383
                                                  Within R-sq.    =     0.1385
Number of clusters (firm_id) =      3,508         Root MSE        =     0.2182

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0123763   .0047982     2.58   0.010     .0029688    .0217839
        var5 |   .0420588   .0252701     1.66   0.096    -.0074868    .0916044
        var4 |  -.0824726   .0226853    -3.64   0.000    -.1269505   -.0379948
      remote |   .0652099    .006083    10.72   0.000     .0532833    .0771365
     startup |   .2507261   .0244249    10.27   0.000     .2028376    .2986145
        var8 |   -.083993   .0266934    -3.15   0.002    -.1363292   -.0316568
       covid |  -.0565381   .0025013   -22.60   0.000    -.0614422   -.0516339
       _cons |    .158441   .0035073    45.17   0.000     .1515643    .1653176
------------------------------------------------------------------------------

Stored estimation results
-------------------------
-----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+---------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          8  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          8  First-stage regression: var5
_ivreg2_var8 | ivreg2         var8          8  First-stage regression: var8
_ivreg2_re~e | ivreg2       remote          8  First-stage regression: remote
-----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  7,  3507) =   331.46
                                                      Prob > F      =   0.0000
Total (centered) SS     =  2319.008532                Centered R2   =   0.1219
Total (uncentered) SS   =  4341.839767                Uncentered R2 =   0.5310
Residual SS             =  2036.256438                Root MSE      =    .2202

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0429265   .0098765     4.35   0.000     .0235689    .0622841
        var5 |   .2153407   .1123637     1.92   0.055    -.0048881    .4355694
        var8 |  -.2277997    .100948    -2.26   0.024    -.4256542   -.0299452
      remote |   .1250044   .0120314    10.39   0.000     .1014232    .1485856
        var4 |  -.2391509     .09575    -2.50   0.013    -.4268174   -.0514843
     startup |   .3563008   .0864374     4.12   0.000     .1868866    .5257149
       covid |   -.073875   .0052889   -13.97   0.000     -.084241    -.063509
       _cons |   .1245288   .0067684    18.40   0.000     .1112631    .1377946
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.495
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              689.027
                         (Kleibergen-Paap rk Wald F statistic):          8.258
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var8 remote
Included instruments: var4 startup covid
Excluded instruments: var6 var7 var9 teleworkable
------------------------------------------------------------------------------
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: none  (tag=none)
   – outcome: leave_rate_we
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 1 HDFE group                            F(   7,   3507) =    5708.84
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1108
                                                  Adj R-squared   =     0.1106
                                                  Within R-sq.    =     0.1108
Number of clusters (firm_id) =      3,508         Root MSE        =     0.2724

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0157957   .0024954     6.33   0.000     .0109032    .0206883
        var5 |  -.0146012   .0108439    -1.35   0.178    -.0358621    .0066597
        var4 |   .0292656   .0095454     3.07   0.002     .0105506    .0479806
      remote |   .0200251    .003141     6.38   0.000     .0138667    .0261835
     startup |   .0389703   .0105088     3.71   0.000     .0183663    .0595744
        var8 |   -.005649    .011833    -0.48   0.633    -.0288493    .0175513
       covid |   .1745833   .0015176   115.04   0.000     .1716078    .1775588
       _cons |    .120006   .0019371    61.95   0.000     .1162081    .1238039
------------------------------------------------------------------------------

Stored estimation results
-------------------------
-----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+---------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          8  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          8  First-stage regression: var5
_ivreg2_var8 | ivreg2         var8          8  First-stage regression: var8
_ivreg2_re~e | ivreg2       remote          8  First-stage regression: remote
-----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  7,  3507) =  5210.74
                                                      Prob > F      =   0.0000
Total (centered) SS     =  3503.247825                Centered R2   =   0.1079
Total (uncentered) SS   =  5536.355818                Uncentered R2 =   0.4355
Residual SS             =  3125.384186                Root MSE      =    .2729

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0506217   .0054072     9.36   0.000     .0400239    .0612196
        var5 |   .0789984   .0518282     1.52   0.127    -.0225829    .1805798
        var8 |  -.1122397   .0516882    -2.17   0.030    -.2135468   -.0109327
      remote |   .0310536   .0068935     4.50   0.000     .0175426    .0445646
        var4 |   -.060565   .0444629    -1.36   0.173    -.1477107    .0265807
     startup |   .1267399   .0442113     2.87   0.004     .0400874    .2133924
       covid |   .1548265   .0030246    51.19   0.000     .1488983    .1607547
       _cons |   .1137513   .0040268    28.25   0.000     .1058589    .1216436
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.495
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              689.027
                         (Kleibergen-Paap rk Wald F statistic):          8.258
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var8 remote
Included instruments: var4 startup covid
Excluded instruments: var6 var7 var9 teleworkable
------------------------------------------------------------------------------
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. 
. 
. 
. local feopt "absorb(firm_id industry_id#yh)"

. local tag   "industrytime"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3.     display as text ">> FE spec: firm×year  (tag=`tag')"
  4.     display as text "   – outcome: `y'"
  5. 
.     summarize `y' if covid == 0, meanonly
  6.     local pre_mean = r(mean)
  7. 
.     // OLS
.      reghdfe `y' var3 var5 var4, ///
>         `feopt' vce(cluster firm_id)
  8.                 
.         local N = e(N)  
  9.         
.     foreach p in var3 var5 var4 {
 10.         local b    = _b[`p']
 11.         local se   = _se[`p']
 12.         local t    = `b'/`se'
 13.         local pval = 2*ttail(e(df_r), abs(`t'))
 14. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 15.     }
 16. 
.     // IV (2nd stage)
.      ivreghdfe ///
>         `y' (var3 var5 = var6 var7) var4, ///
>         `feopt' vce(cluster firm_id) savefirst
 17.     
.         local rkf = e(rkf)
 18.         local N = e(N)  
 19.         
.     foreach p in var3 var5 var4 {
 20.         local b    = _b[`p']
 21.         local se   = _se[`p']
 22.         local t    = `b'/`se'
 23.         local pval = 2*ttail(e(df_r), abs(`t'))
 24.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 25.     }
 26.         
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 27.         local F3 = FS[4,1]
 28.         local F5 = FS[4,2]
 29. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 30.         local N_fs = e(N)
 31. 
.         foreach p in var6 var7 var4 {
 32.                 local b    = _b[`p']
 33.                 local se   = _se[`p']
 34.                 local t    = `b'/`se'
 35.                 local pval = 2*ttail(e(df_r), abs(`t'))
 36. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 37.         }
 38. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 39.         local N_fs = e(N)
 40. 
.         foreach p in var6 var7 var4 {
 41.                 local b    = _b[`p']
 42.                 local se   = _se[`p']
 43.                 local t    = `b'/`se'
 44.                 local pval = 2*ttail(e(df_r), abs(`t'))
 45. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 46.         }
 47. 
. }
>> FE spec: firm×year  (tag=industrytime)
   – outcome: growth_rate_we
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,644
Absorbing 2 HDFE groups                           F(   3,   3479) =      23.74
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3538
                                                  Adj R-squared   =     0.2907
                                                  Within R-sq.    =     0.0052
Number of clusters (firm_id) =      3,480         Root MSE        =     0.1853

                            (Std. err. adjusted for 3,480 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0029117   .0055849    -0.52   0.602    -.0138616    .0080383
        var5 |   .0771493   .0237275     3.25   0.001     .0306281    .1236705
        var4 |  -.1218513   .0211287    -5.77   0.000    -.1632772   -.0804254
       _cons |   .1013944   .0015242    66.52   0.000     .0984059    .1043828
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------+
      Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------+---------------------------------------|
          firm_id |      3480        3480           0    *|
   industry_id#yh |       228           1         227     |
----------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3480                Number of obs =    41644
                                                      F(  3,  3479) =    20.99
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1309.183214                Centered R2   =   0.0025
Total (uncentered) SS   =  1309.183214                Uncentered R2 =   0.0025
Residual SS             =  1305.865473                Root MSE      =    .1776

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0097498   .0271978    -0.36   0.720    -.0630751    .0435755
        var5 |   .2113305   .1085198     1.95   0.052    -.0014385    .4240995
        var4 |   -.233086   .0926455    -2.52   0.012    -.4147311   -.0514409
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             31.227
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              752.901
                         (Kleibergen-Paap rk Wald F statistic):         18.359
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------+
      Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------+---------------------------------------|
          firm_id |      3480        3480           0    *|
   industry_id#yh |       228           1         227     |
----------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=industrytime)
   – outcome: join_rate_we
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,644
Absorbing 2 HDFE groups                           F(   3,   3479) =      15.76
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4531
                                                  Adj R-squared   =     0.3997
                                                  Within R-sq.    =     0.0040
Number of clusters (firm_id) =      3,480         Root MSE        =     0.1823

                            (Std. err. adjusted for 3,480 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0015145   .0056207     0.27   0.788    -.0095057    .0125346
        var5 |    .060878   .0255134     2.39   0.017     .0108553    .1109007
        var4 |  -.1009978   .0229075    -4.41   0.000    -.1459113   -.0560842
       _cons |   .2243336   .0015568   144.10   0.000     .2212812     .227386
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------+
      Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------+---------------------------------------|
          firm_id |      3480        3480           0    *|
   industry_id#yh |       228           1         227     |
----------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3480                Number of obs =    41644
                                                      F(  3,  3479) =    14.51
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1265.965189                Centered R2   =  -0.0068
Total (uncentered) SS   =  1265.965189                Uncentered R2 =  -0.0068
Residual SS             =  1274.636696                Root MSE      =    .1754

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0453654    .027746     1.64   0.102    -.0090347    .0997655
        var5 |   .2581494   .1214062     2.13   0.034     .0201149     .496184
        var4 |  -.2738917   .1039294    -2.64   0.008    -.4776606   -.0701229
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             31.227
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              752.901
                         (Kleibergen-Paap rk Wald F statistic):         18.359
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------+
      Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------+---------------------------------------|
          firm_id |      3480        3480           0    *|
   industry_id#yh |       228           1         227     |
----------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=industrytime)
   – outcome: leave_rate_we
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,644
Absorbing 2 HDFE groups                           F(   3,   3479) =      10.75
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9187
                                                  Adj R-squared   =     0.9108
                                                  Within R-sq.    =     0.0017
Number of clusters (firm_id) =      3,480         Root MSE        =     0.0863

                            (Std. err. adjusted for 3,480 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |    .008378   .0027753     3.02   0.003     .0029366    .0138195
        var5 |  -.0091573   .0112658    -0.81   0.416    -.0312456     .012931
        var4 |   .0218884    .010024     2.18   0.029     .0022348     .041542
       _cons |    .216374   .0007468   289.74   0.000     .2149098    .2178382
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------+
      Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------+---------------------------------------|
          firm_id |      3480        3480           0    *|
   industry_id#yh |       228           1         227     |
----------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3480                Number of obs =    41644
                                                      F(  3,  3479) =    13.20
                                                      Prob > F      =   0.0000
Total (centered) SS     =   282.935614                Centered R2   =  -0.0406
Total (uncentered) SS   =   282.935614                Uncentered R2 =  -0.0406
Residual SS             =  294.4267144                Root MSE      =   .08432

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0742376   .0153587     4.83   0.000     .0441246    .1043506
        var5 |   .1228644   .0672222     1.83   0.068    -.0089346    .2546633
        var4 |  -.1001578   .0581572    -1.72   0.085    -.2141835    .0138679
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             31.227
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              752.901
                         (Kleibergen-Paap rk Wald F statistic):         18.359
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------+
      Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------+---------------------------------------|
          firm_id |      3480        3480           0    *|
   industry_id#yh |       228           1         227     |
----------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. 
. local feopt "absorb(firm_id hqID#yh)"

. local tag   "hqtime"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3.     display as text ">> FE spec: firm×year  (tag=`tag')"
  4.     display as text "   – outcome: `y'"
  5. 
.     summarize `y' if covid == 0, meanonly
  6.     local pre_mean = r(mean)
  7. 
.     // OLS
.      reghdfe `y' var3 var5 var4, ///
>         `feopt' vce(cluster firm_id)
  8.                 
.         local N = e(N)  
  9.         
.     foreach p in var3 var5 var4 {
 10.         local b    = _b[`p']
 11.         local se   = _se[`p']
 12.         local t    = `b'/`se'
 13.         local pval = 2*ttail(e(df_r), abs(`t'))
 14. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 15.     }
 16. 
.     // IV (2nd stage)
.      ivreghdfe ///
>         `y' (var3 var5 = var6 var7) var4, ///
>         `feopt' vce(cluster firm_id) savefirst
 17.     
.         local rkf = e(rkf)
 18.         local N = e(N)  
 19.         
.     foreach p in var3 var5 var4 {
 20.         local b    = _b[`p']
 21.         local se   = _se[`p']
 22.         local t    = `b'/`se'
 23.         local pval = 2*ttail(e(df_r), abs(`t'))
 24.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 25.     }
 26.         
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 27.         local F3 = FS[4,1]
 28.         local F5 = FS[4,2]
 29. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 30.         local N_fs = e(N)
 31. 
.         foreach p in var6 var7 var4 {
 32.                 local b    = _b[`p']
 33.                 local se   = _se[`p']
 34.                 local t    = `b'/`se'
 35.                 local pval = 2*ttail(e(df_r), abs(`t'))
 36. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 37.         }
 38. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 39.         local N_fs = e(N)
 40. 
.         foreach p in var6 var7 var4 {
 41.                 local b    = _b[`p']
 42.                 local se   = _se[`p']
 43.                 local t    = `b'/`se'
 44.                 local pval = 2*ttail(e(df_r), abs(`t'))
 45. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 46.         }
 47. 
. }
>> FE spec: firm×year  (tag=hqtime)
   – outcome: growth_rate_we
(dropped 5276 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =     33,710
Absorbing 2 HDFE groups                           F(   3,   2816) =      16.41
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4006
                                                  Adj R-squared   =     0.2471
                                                  Within R-sq.    =     0.0045
Number of clusters (firm_id) =      2,817         Root MSE        =     0.1991

                            (Std. err. adjusted for 2,817 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0002318   .0065494    -0.04   0.972    -.0130738    .0126102
        var5 |   .0802257   .0272945     2.94   0.003     .0267065    .1337449
        var4 |   -.121692   .0242338    -5.02   0.000    -.1692098   -.0741742
       _cons |   .1093969   .0018354    59.60   0.000     .1057981    .1129957
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2817        2817           0    *|
     hqID#yh |      4055           1        4054     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 5276 singleton observations)
(MWFE estimator converged in 7 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    2817                Number of obs =    33710
                                                      F(  3,  2816) =    14.02
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1068.302218                Centered R2   =  -0.0049
Total (uncentered) SS   =  1068.302218                Uncentered R2 =  -0.0049
Residual SS             =  1073.504775                Root MSE      =    .1903

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0096874   .0165164     0.59   0.558     -.022698    .0420728
        var5 |   .3179141   .1576176     2.02   0.044     .0088565    .6269717
        var4 |  -.3277346   .1353291    -2.42   0.016    -.5930888   -.0623805
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             17.360
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              557.500
                         (Kleibergen-Paap rk Wald F statistic):          8.831
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2817        2817           0    *|
     hqID#yh |      4055           1        4054     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=hqtime)
   – outcome: join_rate_we
(dropped 5276 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =     33,710
Absorbing 2 HDFE groups                           F(   3,   2816) =      11.11
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4920
                                                  Adj R-squared   =     0.3620
                                                  Within R-sq.    =     0.0034
Number of clusters (firm_id) =      2,817         Root MSE        =     0.1955

                            (Std. err. adjusted for 2,817 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0077451   .0064991     1.19   0.233    -.0049984    .0204885
        var5 |   .0589505   .0286603     2.06   0.040     .0027531    .1151479
        var4 |  -.0973155   .0256909    -3.79   0.000    -.1476904   -.0469405
       _cons |   .2358588   .0018373   128.37   0.000     .2322562    .2394615
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2817        2817           0    *|
     hqID#yh |      4055           1        4054     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 5276 singleton observations)
(MWFE estimator converged in 7 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    2817                Number of obs =    33710
                                                      F(  3,  2816) =    11.94
                                                      Prob > F      =   0.0000
Total (centered) SS     =  1029.156964                Centered R2   =  -0.0182
Total (uncentered) SS   =  1029.156964                Uncentered R2 =  -0.0182
Residual SS             =  1047.867394                Root MSE      =     .188

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0610369   .0175115     3.49   0.000     .0267002    .0953736
        var5 |    .359923   .1787064     2.01   0.044     .0095142    .7103317
        var4 |   -.365755   .1539388    -2.38   0.018    -.6675993   -.0639107
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             17.360
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              557.500
                         (Kleibergen-Paap rk Wald F statistic):          8.831
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2817        2817           0    *|
     hqID#yh |      4055           1        4054     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=hqtime)
   – outcome: leave_rate_we
(dropped 5276 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =     33,710
Absorbing 2 HDFE groups                           F(   3,   2816) =      13.88
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9230
                                                  Adj R-squared   =     0.9033
                                                  Within R-sq.    =     0.0023
Number of clusters (firm_id) =      2,817         Root MSE        =     0.0903

                            (Std. err. adjusted for 2,817 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0143074   .0032006     4.47   0.000     .0080316    .0205832
        var5 |   -.015937   .0116409    -1.37   0.171    -.0387625    .0068885
        var4 |   .0270261   .0101309     2.67   0.008     .0071614    .0468909
       _cons |   .2201116   .0009015   244.16   0.000     .2183439    .2218793
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2817        2817           0    *|
     hqID#yh |      4055           1        4054     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 5276 singleton observations)
(MWFE estimator converged in 7 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    2817                Number of obs =    33710
                                                      F(  3,  2816) =    20.69
                                                      Prob > F      =   0.0000
Total (centered) SS     =  219.2358035                Centered R2   =  -0.0289
Total (uncentered) SS   =  219.2358035                Uncentered R2 =  -0.0289
Residual SS             =  225.5751806                Root MSE      =   .08722

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0648961   .0093746     6.92   0.000     .0465144    .0832779
        var5 |    .110328   .0788537     1.40   0.162    -.0442888    .2649448
        var4 |  -.0908155   .0681388    -1.33   0.183    -.2244225    .0427915
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             17.360
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              557.500
                         (Kleibergen-Paap rk Wald F statistic):          8.831
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2817        2817           0    *|
     hqID#yh |      4055           1        4054     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. 
. local feopt "absorb(firm_id hqID#industry_id#yh)"

. local tag   "hqindustrytime"

. 
. foreach y of local outcomes {
  2.     use "$processed_data/firm_panel.dta", clear
  3.     display as text ">> FE spec: firm×year  (tag=`tag')"
  4.     display as text "   – outcome: `y'"
  5. 
.     summarize `y' if covid == 0, meanonly
  6.     local pre_mean = r(mean)
  7. 
.     // OLS
.      reghdfe `y' var3 var5 var4, ///
>         `feopt' vce(cluster firm_id)
  8.                 
.         local N = e(N)  
  9.         
.     foreach p in var3 var5 var4 {
 10.         local b    = _b[`p']
 11.         local se   = _se[`p']
 12.         local t    = `b'/`se'
 13.         local pval = 2*ttail(e(df_r), abs(`t'))
 14. 
.                 post handle ("OLS") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (.) (`N')
 15.     }
 16. 
.     // IV (2nd stage)
.      ivreghdfe ///
>         `y' (var3 var5 = var6 var7) var4, ///
>         `feopt' vce(cluster firm_id) savefirst
 17.     
.         local rkf = e(rkf)
 18.         local N = e(N)  
 19.         
.     foreach p in var3 var5 var4 {
 20.         local b    = _b[`p']
 21.         local se   = _se[`p']
 22.         local t    = `b'/`se'
 23.         local pval = 2*ttail(e(df_r), abs(`t'))
 24.                 post handle ("IV") ("`tag'") ("`y'") ("`p'") ///
>                                         (`b') (`se') (`pval') (`pre_mean') ///
>                                         (`rkf') (`N')
 25.     }
 26.         
.         *--- pull partial F's from the stacked matrix
.         matrix FS = e(first)
 27.         local F3 = FS[4,1]
 28.         local F5 = FS[4,2]
 29. 
.         *========= var3 first stage ===================================================
.         estimates restore _ivreg2_var3
 30.         local N_fs = e(N)
 31. 
.         foreach p in var6 var7 var4 {
 32.                 local b    = _b[`p']
 33.                 local se   = _se[`p']
 34.                 local t    = `b'/`se'
 35.                 local pval = 2*ttail(e(df_r), abs(`t'))
 36. 
.                 post handle_fs ("`tag'") ("`y'") ("var3") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F3') (`rkf') (`N_fs')
 37.         }
 38. 
.         *========= var5 first stage ===================================================
.         estimates restore _ivreg2_var5
 39.         local N_fs = e(N)
 40. 
.         foreach p in var6 var7 var4 {
 41.                 local b    = _b[`p']
 42.                 local se   = _se[`p']
 43.                 local t    = `b'/`se'
 44.                 local pval = 2*ttail(e(df_r), abs(`t'))
 45. 
.                 post handle_fs ("`tag'") ("`y'") ("var5") ("`p'") ///
>                                                 (`b') (`se') (`pval') ///
>                                                 (`F5') (`rkf') (`N_fs')
 46.         }
 47. 
. }
>> FE spec: firm×year  (tag=hqindustrytime)
   – outcome: growth_rate_we
(dropped 14671 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =     24,003
Absorbing 2 HDFE groups                           F(   3,   2005) =       9.18
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4280
                                                  Adj R-squared   =     0.2260
                                                  Within R-sq.    =     0.0033
Number of clusters (firm_id) =      2,006         Root MSE        =     0.2173

                            (Std. err. adjusted for 2,006 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0037615   .0108477    -0.35   0.729    -.0250355    .0175124
        var5 |   .0899499   .0346071     2.60   0.009     .0220803    .1578195
        var4 |  -.1234317   .0312593    -3.95   0.000    -.1847358   -.0621277
       _cons |   .1274174   .0032351    39.39   0.000     .1210729    .1337619
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------------------+
             Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------------------+---------------------------------------|
                 firm_id |      2006        2006           0    *|
     hqID#industry_id#yh |      4258           1        4257     |
-----------------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 14671 singleton observations)
(MWFE estimator converged in 7 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    2006                Number of obs =    24003
                                                      F(  3,  2005) =     3.58
                                                      Prob > F      =   0.0134
Total (centered) SS     =   840.361114                Centered R2   =  -0.1248
Total (uncentered) SS   =   840.361114                Uncentered R2 =  -0.1248
Residual SS             =  945.2202762                Root MSE      =    .2188

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .1338818   .1187084     1.13   0.260     -.098923    .3666866
        var5 |   .9330338   .7122257     1.31   0.190    -.4637462    2.329814
        var4 |  -.8765064   .6327859    -1.39   0.166    -2.117493    .3644804
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              2.868
                                                   Chi-sq(1) P-val =    0.0904
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               46.034
                         (Kleibergen-Paap rk Wald F statistic):          1.223
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------------------+
             Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------------------+---------------------------------------|
                 firm_id |      2006        2006           0    *|
     hqID#industry_id#yh |      4258           1        4257     |
-----------------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=hqindustrytime)
   – outcome: join_rate_we
(dropped 14671 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =     24,003
Absorbing 2 HDFE groups                           F(   3,   2005) =       7.00
Statistics robust to heteroskedasticity           Prob > F        =     0.0001
                                                  R-squared       =     0.5081
                                                  Adj R-squared   =     0.3343
                                                  Within R-sq.    =     0.0026
Number of clusters (firm_id) =      2,006         Root MSE        =     0.2125

                            (Std. err. adjusted for 2,006 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0037038    .010784    -0.34   0.731    -.0248527    .0174451
        var5 |   .0741047   .0352924     2.10   0.036     .0048911    .1433182
        var4 |  -.1047563   .0320586    -3.27   0.001    -.1676279   -.0418847
       _cons |   .2641332   .0032094    82.30   0.000      .257839    .2704273
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------------------+
             Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------------------+---------------------------------------|
                 firm_id |      2006        2006           0    *|
     hqID#industry_id#yh |      4258           1        4257     |
-----------------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 14671 singleton observations)
(MWFE estimator converged in 7 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    2006                Number of obs =    24003
                                                      F(  3,  2005) =     2.64
                                                      Prob > F      =   0.0482
Total (centered) SS     =  802.9001865                Centered R2   =  -0.2359
Total (uncentered) SS   =  802.9001865                Uncentered R2 =  -0.2359
Residual SS             =  992.3423589                Root MSE      =    .2242

------------------------------------------------------------------------------
             |               Robust
join_rate_we | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .2302362   .1439269     1.60   0.110    -.0520259    .5124982
        var5 |   1.128866   .8903388     1.27   0.205    -.6172197    2.874952
        var4 |  -1.053583   .7919692    -1.33   0.184    -2.606752    .4995857
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              2.868
                                                   Chi-sq(1) P-val =    0.0904
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               46.034
                         (Kleibergen-Paap rk Wald F statistic):          1.223
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------------------+
             Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------------------+---------------------------------------|
                 firm_id |      2006        2006           0    *|
     hqID#industry_id#yh |      4258           1        4257     |
-----------------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)
>> FE spec: firm×year  (tag=hqindustrytime)
   – outcome: leave_rate_we
(dropped 14671 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =     24,003
Absorbing 2 HDFE groups                           F(   3,   2005) =       3.24
Statistics robust to heteroskedasticity           Prob > F        =     0.0214
                                                  R-squared       =     0.9184
                                                  Adj R-squared   =     0.8895
                                                  Within R-sq.    =     0.0009
Number of clusters (firm_id) =      2,006         Root MSE        =     0.0978

                            (Std. err. adjusted for 2,006 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0044436   .0049081     0.91   0.365    -.0051819    .0140692
        var5 |  -.0160913     .01367    -1.18   0.239    -.0429003    .0107176
        var4 |   .0251359   .0118849     2.11   0.035     .0018278     .048444
       _cons |   .2331692   .0014658   159.07   0.000     .2302945    .2360438
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------------------+
             Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------------------+---------------------------------------|
                 firm_id |      2006        2006           0    *|
     hqID#industry_id#yh |      4258           1        4257     |
-----------------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 14671 singleton observations)
(MWFE estimator converged in 7 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    2006                Number of obs =    24003
                                                      F(  3,  2005) =     2.25
                                                      Prob > F      =   0.0805
Total (centered) SS     =  169.9054238                Centered R2   =  -0.2048
Total (uncentered) SS   =  169.9054238                Uncentered R2 =  -0.2048
Residual SS             =  204.6972095                Root MSE      =    .1018

------------------------------------------------------------------------------
             |               Robust
leave_rate~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .1375828   .0679138     2.03   0.043     .0043937    .2707718
        var5 |   .3823295   .3917906     0.98   0.329    -.3860298    1.150689
        var4 |  -.3381089   .3491621    -0.97   0.333    -1.022867    .3466496
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              2.868
                                                   Chi-sq(1) P-val =    0.0904
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               46.034
                         (Kleibergen-Paap rk Wald F statistic):          1.223
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------------------+
             Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------------------+---------------------------------------|
                 firm_id |      2006        2006           0    *|
     hqID#industry_id#yh |      4258           1        4257     |
-----------------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(results _ivreg2_var3 are active now)
(results _ivreg2_var5 are active now)

. 
. 
. 
. 
. 
. //-------------------------------------------------------------
. // Close & export CSV
. //-------------------------------------------------------------
. postclose handle

. use `out', clear

. export delimited using "`result_dir'/consolidated_results.csv", ///
>     replace delimiter(",") quote
file ../results/raw/firm_scaling_alternative_fe/consolidated_results.csv saved

.         
. *------------------------------------------------------------
. *  Write first-stage CSV to disk
. *------------------------------------------------------------
. postclose handle_fs

. use `out_fs', clear

. export delimited using "`result_dir'/first_stage_fstats.csv", ///
>         replace delimiter(",") quote
file ../results/raw/firm_scaling_alternative_fe/first_stage_fstats.csv saved

.                 
. 
. display as result "→ main CSV       : `result_dir'/consolidated_results.csv"
→ main CSV       : ../results/raw/firm_scaling_alternative_fe/consolidated_results.csv

. display as result "→ first-stage CSV: `result_dir'/first_stage_fstats.csv"
→ first-stage CSV: ../results/raw/firm_scaling_alternative_fe/first_stage_fstats.csv

. 
. log close
      name:  <unnamed>
       log:  /Users/saul/Dropbox/Remote Work Startups/main/spec/log/firm_scaling_alternative_fe.log
  log type:  text
 closed on:  28 May 2025, 05:09:47
-----------------------------------------------------------------------------------------------------------------------------------------

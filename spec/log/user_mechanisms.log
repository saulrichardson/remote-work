-----------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/saul/Dropbox/Remote Work Startups/main/spec/log/user_mechanisms.log
  log type:  text
 opened on:  29 May 2025, 10:39:39

. 
. 
. // 0) Globals + setup
. do "../src/globals.do"

. global raw_data "../data/raw"

. global processed_data  "../data/processed"

. global results "../results/raw"

. global clean_results "../results/cleaned"

. 
. 
. 
end of do-file

. local result_dir "$results/`specname'"

. capture mkdir "`result_dir'"

. 
. // 1) Load & prepare once
. use "$processed_data/user_panel.dta", clear

. gen seniority_4 = !inrange(seniority_levels,1,3)

. // drop if missing(hhi_1000, seniority_4, rent)
. 
. // interactions
. gen var8  = covid*rent
(6,813 missing values generated)

. gen var9  = covid*rent*remote
(6,813 missing values generated)

. gen var10 = teleworkable*covid*rent
(21,428 missing values generated)

. gen var11 = covid*hhi_1000
(118 missing values generated)

. gen var12 = covid*hhi_1000*remote
(118 missing values generated)

. gen var13 = teleworkable*covid*hhi_1000
(15,305 missing values generated)

. gen var14 = covid*seniority_4

. gen var15 = covid*seniority_4*remote

. gen var16 = teleworkable*covid*seniority_4
(15,194 missing values generated)

. 
. 
. capture postclose handle

. tempfile out

. postfile handle ///
>     str8   model_type  /// "OLS", "IV"
>     str244 spec        ///
>     str40  param       ///
>     double coef se pval pre_mean rkf nobs /// <-- exactly five numeric columns
>     using `out', replace
(file /var/folders/hg/s3xm9w393gxby64_zklmhgbc0000gn/T//S_56802.000001 not found)

. 
. 
. 
. local specs "baseline rent hhi rent_hhi seniority rent_seniority hhi_seniority rent_hhi_seniority"

. 
. 
. // Define OLS exogenous regressors by spec
. local spec_ols_exog1  var4

. local spec_ols_exog2  var4 var8 var9

. local spec_ols_exog3  var4 var11 var12

. local spec_ols_exog4  var4 var8 var9 var11 var12

. local spec_ols_exog5  var4 var14 var15

. local spec_ols_exog6  var4 var8 var9 var14 var15

. local spec_ols_exog7  var4 var11 var12 var14 var15

. local spec_ols_exog8  var4 var8 var9 var11 var12 var14 var15

. 
. // Define IV exogenous regressors by spec (drop the 3‐way terms)
. local spec_iv_exog1   var4

. local spec_iv_exog2   var4 var8

. local spec_iv_exog3   var4 var11

. local spec_iv_exog4   var4 var8 var11

. local spec_iv_exog5   var4 var14

. local spec_iv_exog6   var4 var8 var14

. local spec_iv_exog7   var4 var11 var14

. local spec_iv_exog8   var4 var8 var11 var14

. 
. 
. // instruments by spec
. local spec_instr1 var6 var7

. local spec_instr2 var6 var7 var10

. local spec_instr3 var6 var7 var13

. local spec_instr4 var6 var7 var10 var13

. local spec_instr5 var6 var7 var16

. local spec_instr6 var6 var7 var10 var16

. local spec_instr7 var6 var7 var13 var16

. local spec_instr8 var6 var7 var10 var13 var16

. 
. 
. // endogenous vars by spec
. local spec_endo1  var3 var5

. local spec_endo2  var3 var5 var9

. local spec_endo3  var3 var5 var12

. local spec_endo4  var3 var5 var9 var12

. local spec_endo5  var3 var5 var15

. local spec_endo6  var3 var5 var9 var15

. local spec_endo7  var3 var5 var12 var15

. local spec_endo8  var3 var5 var9 var12 var15

. 
. 
. 
. // 3) SPEC 1: Baseline on the full sample
. display as text "→ Spec 1: baseline (full sample)"
→ Spec 1: baseline (full sample)

. 
. summarize total_contributions_q100 if covid == 0, meanonly

. local pre_mean = r(mean)

. 
. // 3a) OLS
. reghdfe total_contributions_q100 var3 var5 var4, ///
>     absorb(firm_id user_id yh) vce(cluster user_id)
(dropped 1443 singleton observations)
(MWFE estimator converged in 81 iterations)

HDFE Linear regression                            Number of obs   =    229,862
Absorbing 3 HDFE groups                           F(   3,  35788) =      11.67
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6838
                                                  Adj R-squared   =     0.6213
                                                  Within R-sq.    =     0.0004
Number of clusters (user_id) =     35,789         Root MSE        =    18.4409

                           (Std. err. adjusted for 35,789 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -1.032798   .4818263    -2.14   0.032    -1.977192   -.0884035
        var5 |   5.175073   1.236242     4.19   0.000     2.752001    7.598144
        var4 |  -5.526524   1.065824    -5.19   0.000    -7.615571   -3.437477
       _cons |   50.13249   .1467355   341.65   0.000     49.84489     50.4201
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2151           1        2150     |
     user_id |     35789       35789           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. local N = e(N)

. foreach p in var3 var5 {
  2.     local b    = _b[`p']
  3.     local se   = _se[`p']
  4.     local t    = `b'/`se'
  5.     local pval = 2*ttail(e(df_r), abs(`t'))
  6.     post handle ("OLS") ("baseline") ("`p'") ///
>                 (`b') (`se') (`pval') (`pre_mean') ///
>                 (.) (`N')
  7. }

. 
. // 3b) IV
. ivreghdfe total_contributions_q100 (var3 var5 = var6 var7) var4, ///
>     absorb(firm_id user_id yh) vce(cluster user_id) savefirst
(dropped 1443 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   35789                Number of obs =   229862
                                                      F(  3, 35788) =     7.03
                                                      Prob > F      =   0.0001
Total (centered) SS     =  65286353.41                Centered R2   =  -0.0014
Total (uncentered) SS   =  65286353.41                Uncentered R2 =  -0.0014
Residual SS             =  65377411.43                Root MSE      =    16.94

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -7.151334   3.898685    -1.83   0.067    -14.79287    .4902066
        var5 |   9.937201   5.370722     1.85   0.064    -.5895776    20.46398
        var4 |  -8.364159    4.04877    -2.07   0.039    -16.29987    -.428447
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):            266.393
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1850.988
                         (Kleibergen-Paap rk Wald F statistic):        140.597
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2151           1        2150     |
     user_id |     35789       35789           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. local rkf = e(rkf)

. local N   = e(N)

. foreach p in var3 var5 {
  2.     local b    = _b[`p']
  3.     local se   = _se[`p']
  4.     local t    = `b'/`se'
  5.     local pval = 2*ttail(e(df_r), abs(`t'))
  6.     post handle ("IV") ("baseline") ("`p'") ///
>                 (`b') (`se') (`pval') (`pre_mean') ///
>                 (`rkf') (`N')
  7. }

. 
. // 4) Now restrict to observations with mechanism vars
. // Ensure a common sample across *all* mechanism variables (rent, HHI, seniority,
. // wage dispersion).  This keeps the estimation sample identical in the two
. // mechanism families.
. drop if missing(rent, hhi_1000, seniority_4, sd_wage, p90_p10_gap)
(6,898 observations deleted)

. 
. 
. 
. // 4) Loop
. forvalues i = 2/8 {
  2.     // 1) pick the spec name
.     local spec    : word `i' of `specs'
  3. 
.     // 2) build up the four pieces we need
.     local ols_exog "`spec_ols_exog`i''"
  4.     local iv_exog  "`spec_iv_exog`i''"
  5.     local instr    "`spec_instr`i''"
  6.     local endo     "`spec_endo`i''"
  7.         
. 
.     display as text "→ Spec `i': `spec'"
  8. 
.     summarize total_contributions_q100 if covid == 0, meanonly
  9.     local pre_mean = r(mean)
 10. 
.     // 4a) OLS
.     reghdfe total_contributions_q100 var3 var5 `ols_exog', ///
>         absorb(firm_id user_id yh) vce(cluster user_id)
 11.         
.         local N = e(N) 
 12.         
.     foreach p in var3 var5 {
 13.         local b    = _b[`p']
 14.         local se   = _se[`p']
 15.         local t    = `b'/`se'
 16.         local pval = 2*ttail(e(df_r), abs(`t'))
 17.        post handle ("OLS") ("`spec'") ("`p'") ///
>                     (`b') (`se') (`pval') (`pre_mean') ///
>                     (.) (`N')
 18.     }
 19. 
.     // 4b) IV
.     ivreghdfe total_contributions_q100 (`endo' = `instr') `iv_exog', ///
>         absorb(firm_id user_id yh) vce(cluster user_id) savefirst
 20.     local rkf = e(rkf)
 21.         local N   = e(N)
 22.         
.     foreach p in var3 var5 {
 23.         local b    = _b[`p']
 24.         local se   = _se[`p']
 25.         local t    = `b'/`se'
 26.         local pval = 2*ttail(e(df_r), abs(`t'))
 27.        post handle ("IV") ("`spec'") ("`p'") ///
>                     (`b') (`se') (`pval') (`pre_mean') ///
>                     (`rkf') (`N')
 28.     }
 29. 
. }
→ Spec 2: rent
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   5,  34860) =       7.91
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6851
                                                  Adj R-squared   =     0.6227
                                                  Within R-sq.    =     0.0004
Number of clusters (user_id) =     34,861         Root MSE        =    18.4070

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -1.889871    1.13149    -1.67   0.095    -4.107627    .3278857
        var5 |    2.82651   1.236483     2.29   0.022     .4029632    5.250057
        var4 |  -3.214149   1.060387    -3.03   0.002    -5.292541   -1.135757
        var8 |  -.0425476   .0164441    -2.59   0.010    -.0747785   -.0103167
        var9 |   .0236087   .0219219     1.08   0.282    -.0193589    .0665762
       _cons |   50.98478   .3618726   140.89   0.000      50.2755    51.69406
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          5  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          5  First-stage regression: var5
_ivreg2_var9 | ivreg2         var9          5  First-stage regression: var9
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  5, 33240) =     0.11
                                                      Prob > F      =   0.9900
Total (centered) SS     =  57872262.21                Centered R2   = -24.2184
Total (uncentered) SS   =  57872262.21                Uncentered R2 = -24.2184
Residual SS             =   1459444717                Root MSE      =    84.14

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   1634.649   2624.383     0.62   0.533    -3509.233    6778.532
        var5 |  -138.3645   242.0499    -0.57   0.568    -612.7908    336.0618
        var9 |  -30.72753    49.1614    -0.63   0.532    -127.0856    65.63056
        var4 |    125.382   215.3603     0.58   0.560    -296.7318    547.4959
        var8 |   20.21578   32.35878     0.62   0.532    -43.20857    83.64012
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              0.405
                                                   Chi-sq(1) P-val =    0.5244
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                0.699
                         (Kleibergen-Paap rk Wald F statistic):          0.134
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var9
Included instruments: var4 var8
Excluded instruments: var6 var7 var10
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 3: hhi
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   5,  34860) =       4.84
Statistics robust to heteroskedasticity           Prob > F        =     0.0002
                                                  R-squared       =     0.6850
                                                  Adj R-squared   =     0.6226
                                                  Within R-sq.    =     0.0003
Number of clusters (user_id) =     34,861         Root MSE        =    18.4085

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   -.732854   .6050823    -1.21   0.226    -1.918835    .4531266
        var5 |   3.488384   1.272547     2.74   0.006     .9941526    5.982616
        var4 |  -3.910798   1.102744    -3.55   0.000    -6.072211   -1.749385
       var11 |    .000398   .0006142     0.65   0.517    -.0008058    .0016018
       var12 |  -.0007448   .0007862    -0.95   0.343    -.0022859    .0007962
       _cons |   50.07325   .1939819   258.13   0.000     49.69304    50.45346
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          5  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          5  First-stage regression: var5
_ivreg2_v~12 | ivreg2        var12          5  First-stage regression: var12
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  5, 33240) =     0.01
                                                      Prob > F      =   1.0000
Total (centered) SS     =  57872262.21                Centered R2   = -1.1e+02
Total (uncentered) SS   =  57872262.21                Uncentered R2 = -1.1e+02
Residual SS             =   6577233461                Root MSE      =    178.6

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   1764.712   35402.74     0.05   0.960    -67625.91    71155.33
        var5 |   1285.436   25457.27     0.05   0.960    -48611.72    51182.59
       var12 |  -1.520572   30.36314    -0.05   0.960     -61.0334    57.99225
        var4 |  -1296.605   25719.75    -0.05   0.960    -51708.21    49115.01
       var11 |   1.154244   23.04478     0.05   0.960    -44.01434    46.32283
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              0.003
                                                   Chi-sq(1) P-val =    0.9598
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                0.083
                         (Kleibergen-Paap rk Wald F statistic):          0.001
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var12
Included instruments: var4 var11
Excluded instruments: var6 var7 var13
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 4: rent_hhi
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   7,  34860) =       5.93
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6851
                                                  Adj R-squared   =     0.6227
                                                  Within R-sq.    =     0.0005
Number of clusters (user_id) =     34,861         Root MSE        =    18.4069

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   -1.38961   1.175251    -1.18   0.237     -3.69314    .9139206
        var5 |   3.298777   1.280146     2.58   0.010     .7896488    5.807905
        var4 |   -3.57192   1.107559    -3.23   0.001    -5.742772   -1.401068
        var8 |  -.0447047     .01668    -2.68   0.007     -.077398   -.0120114
        var9 |    .025132   .0220945     1.14   0.255    -.0181739    .0684378
       var11 |   .0008413   .0006257     1.34   0.179     -.000385    .0020676
       var12 |  -.0011969   .0007953    -1.50   0.132    -.0027557    .0003619
       _cons |    50.8503   .3711773   137.00   0.000     50.12278    51.57782
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_var9 | ivreg2         var9          7  First-stage regression: var9
_ivreg2_v~12 | ivreg2        var12          7  First-stage regression: var12
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  7, 33240) =     0.91
                                                      Prob > F      =   0.4944
Total (centered) SS     =  57872262.21                Centered R2   =  -2.4329
Total (uncentered) SS   =  57872262.21                Uncentered R2 =  -2.4329
Residual SS             =  198671973.4                Root MSE      =    31.04

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |    478.367   788.9229     0.61   0.544     -1067.95    2024.684
        var5 |    63.7802   215.2621     0.30   0.767     -358.141    485.7015
        var9 |  -5.061961   17.13985    -0.30   0.768    -38.65668    28.53276
       var12 |  -.1736355   .1158818    -1.50   0.134     -.400768     .053497
        var4 |  -70.54342   215.3723    -0.33   0.743    -492.6807    351.5938
        var8 |   2.870494   11.63552     0.25   0.805    -19.93554    25.67653
       var11 |   .1255172   .1062831     1.18   0.238    -.0828014    .3338358
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              1.210
                                                   Chi-sq(1) P-val =    0.2713
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                4.890
                         (Kleibergen-Paap rk Wald F statistic):          0.301
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var9 var12
Included instruments: var4 var8 var11
Excluded instruments: var6 var7 var10 var13
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 5: seniority
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   5,  34860) =       4.89
Statistics robust to heteroskedasticity           Prob > F        =     0.0002
                                                  R-squared       =     0.6850
                                                  Adj R-squared   =     0.6226
                                                  Within R-sq.    =     0.0003
Number of clusters (user_id) =     34,861         Root MSE        =    18.4085

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   5.122473   5.806252     0.88   0.378    -6.257968    16.50291
        var5 |   3.049521   1.228181     2.48   0.013     .6422469    5.456795
        var4 |   -3.57196   1.049271    -3.40   0.001    -5.628564   -1.515356
       var14 |   6.677766   5.598226     1.19   0.233    -4.294937    17.65047
       var15 |  -6.199544   5.798237    -1.07   0.285    -17.56427    5.165187
       _cons |   47.12189    2.54592    18.51   0.000      42.1318    52.11197
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          5  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          5  First-stage regression: var5
_ivreg2_v~15 | ivreg2        var15          5  First-stage regression: var15
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  5, 33240) =     0.06
                                                      Prob > F      =   0.9978
Total (centered) SS     =  57872262.21                Centered R2   = -1.3e+03
Total (uncentered) SS   =  57872262.21                Uncentered R2 = -1.3e+03
Residual SS             =  7.65213e+10                Root MSE      =    609.3

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -57975.91   108642.7    -0.53   0.594    -270919.5    154967.6
        var5 |  -858.9354   1705.245    -0.50   0.614    -4201.276    2483.406
       var15 |   58330.77   109303.2     0.53   0.594    -155907.4    272568.9
        var4 |   625.4496   1257.122     0.50   0.619    -1838.553    3089.452
       var14 |  -54463.83   102096.8    -0.53   0.594    -254577.2    145649.5
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              0.289
                                                   Chi-sq(1) P-val =    0.5908
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                0.010
                         (Kleibergen-Paap rk Wald F statistic):          0.095
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var15
Included instruments: var4 var14
Excluded instruments: var6 var7 var16
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 6: rent_seniority
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   7,  34860) =       5.84
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6851
                                                  Adj R-squared   =     0.6227
                                                  Within R-sq.    =     0.0004
Number of clusters (user_id) =     34,861         Root MSE        =    18.4069

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   4.132048   5.803104     0.71   0.476    -7.242221    15.50632
        var5 |   2.645243   1.243412     2.13   0.033     .2081161    5.082369
        var4 |  -3.011142   1.062839    -2.83   0.005     -5.09434   -.9279431
        var8 |  -.0424652   .0164446    -2.58   0.010    -.0746971   -.0102333
        var9 |   .0232335   .0219354     1.06   0.290    -.0197607    .0662276
       var14 |   6.634126   5.541277     1.20   0.231    -4.226955    17.49521
       var15 |  -5.994487     5.7425    -1.04   0.297    -17.24997    5.260996
       _cons |   47.96761   2.530985    18.95   0.000      43.0068    52.92842
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_var9 | ivreg2         var9          7  First-stage regression: var9
_ivreg2_v~15 | ivreg2        var15          7  First-stage regression: var15
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  7, 33240) =     0.11
                                                      Prob > F      =   0.9978
Total (centered) SS     =  57872262.21                Centered R2   = -17.4280
Total (uncentered) SS   =  57872262.21                Uncentered R2 = -17.4280
Residual SS             =   1066468280                Root MSE      =    71.93

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   2976.607   4682.189     0.64   0.525    -6200.648    12153.86
        var5 |  -69.58759   198.1194    -0.35   0.725    -457.9087    318.7335
        var9 |  -25.37993   41.36963    -0.61   0.540    -106.4659      55.706
       var15 |  -1632.683   4168.398    -0.39   0.695    -9802.891    6537.524
        var4 |   70.03372   174.6946     0.40   0.689    -272.3739    412.4413
        var8 |   16.70258   27.18115     0.61   0.539    -36.57343    69.97858
       var14 |   1581.996    3893.41     0.41   0.685    -6049.226    9213.217
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              0.397
                                                   Chi-sq(1) P-val =    0.5286
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                0.613
                         (Kleibergen-Paap rk Wald F statistic):          0.098
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var9 var15
Included instruments: var4 var8 var14
Excluded instruments: var6 var7 var10 var16
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 7: hhi_seniority
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   7,  34860) =       3.60
Statistics robust to heteroskedasticity           Prob > F        =     0.0007
                                                  R-squared       =     0.6850
                                                  Adj R-squared   =     0.6226
                                                  Within R-sq.    =     0.0003
Number of clusters (user_id) =     34,861         Root MSE        =    18.4085

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   6.415294   5.899375     1.09   0.277     -5.14767    17.97826
        var5 |   3.272825   1.274492     2.57   0.010     .7747798    5.770869
        var4 |  -3.705445   1.102885    -3.36   0.001    -5.867134   -1.543755
       var11 |   .0004557   .0006183     0.74   0.461    -.0007563    .0016677
       var12 |  -.0008107   .0008053    -1.01   0.314    -.0023891    .0007677
       var14 |   7.117422   5.619453     1.27   0.205    -3.896886    18.13173
       var15 |  -7.122768   5.842116    -1.22   0.223     -18.5735    4.327966
       _cons |   46.82745   2.566617    18.24   0.000      41.7968     51.8581
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_v~12 | ivreg2        var12          7  First-stage regression: var12
_ivreg2_v~15 | ivreg2        var15          7  First-stage regression: var15
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  7, 33240) =     0.55
                                                      Prob > F      =   0.7964
Total (centered) SS     =  57872262.21                Centered R2   =  -2.4897
Total (uncentered) SS   =  57872262.21                Uncentered R2 =  -2.4897
Residual SS             =  201954582.4                Root MSE      =     31.3

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   1740.313   7836.745     0.22   0.824    -13619.98    17100.61
        var5 |   169.2124   126.6845     1.34   0.182    -79.09381    417.5186
       var12 |  -.2022124   .1280166    -1.58   0.114    -.4531296    .0487047
       var15 |   -1532.11   7835.345    -0.20   0.845    -16889.66    13825.44
        var4 |  -165.0932   107.5825    -1.53   0.125    -375.9586    45.77231
       var11 |   .1480519   .0889195     1.67   0.096    -.0262336    .3223373
       var14 |   1392.078   7279.283     0.19   0.848    -12875.57    15659.73
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              0.255
                                                   Chi-sq(1) P-val =    0.6139
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                3.016
                         (Kleibergen-Paap rk Wald F statistic):          0.063
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var12 var15
Included instruments: var4 var11 var14
Excluded instruments: var6 var7 var13 var16
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 8: rent_hhi_seniority
(dropped 1491 singleton observations)
(MWFE estimator converged in 82 iterations)

HDFE Linear regression                            Number of obs   =    222,916
Absorbing 3 HDFE groups                           F(   9,  34860) =       4.73
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6851
                                                  Adj R-squared   =     0.6227
                                                  Within R-sq.    =     0.0005
Number of clusters (user_id) =     34,861         Root MSE        =    18.4067

                           (Std. err. adjusted for 34,861 clusters in user_id)
------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   5.756217   5.891788     0.98   0.329    -5.791876    17.30431
        var5 |   3.082336   1.283246     2.40   0.016     .5671333    5.597538
        var4 |  -3.362813    1.10852    -3.03   0.002    -5.535549   -1.190077
        var8 |  -.0449889   .0166883    -2.70   0.007    -.0776986   -.0122793
        var9 |   .0253483   .0221096     1.15   0.252    -.0179871    .0686838
       var11 |   .0008921   .0006303     1.42   0.157    -.0003433    .0021276
       var12 |  -.0012387   .0008146    -1.52   0.128    -.0028354     .000358
       var14 |   7.305656    5.56441     1.31   0.189    -3.600766    18.21208
       var15 |  -7.136937    5.78847    -1.23   0.218    -18.48252     4.20865
       _cons |   47.52569   2.548636    18.65   0.000     42.53028    52.52109
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      2004           1        2003     |
     user_id |     34861       34861           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1670 singleton observations)
(MWFE estimator converged in 81 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          9  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          9  First-stage regression: var5
_ivreg2_var9 | ivreg2         var9          9  First-stage regression: var9
_ivreg2_v~12 | ivreg2        var12          9  First-stage regression: var12
_ivreg2_v~15 | ivreg2        var15          9  First-stage regression: var15
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on user_id

Number of clusters (user_id) =   33241                Number of obs =   208124
                                                      F(  9, 33240) =     0.87
                                                      Prob > F      =   0.5484
Total (centered) SS     =  57872262.21                Centered R2   =  -1.8111
Total (uncentered) SS   =  57872262.21                Uncentered R2 =  -1.8111
Residual SS             =  162686407.9                Root MSE      =    28.09

------------------------------------------------------------------------------
             |               Robust
total_co~100 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   1758.102   2378.184     0.74   0.460    -2903.223    6419.428
        var5 |   95.45173   199.0499     0.48   0.632    -294.6931    485.5966
        var9 |  -.3366135   15.72664    -0.02   0.983    -31.16139    30.48817
       var12 |  -.1443746   .0898371    -1.61   0.108    -.3204586    .0317093
       var15 |  -1580.899    2450.83    -0.65   0.519    -6384.613    3222.815
        var4 |  -94.11022   194.6295    -0.48   0.629     -475.591    287.3705
        var8 |   -.125422    10.6356    -0.01   0.991    -20.97157    20.72072
       var11 |   .1052184   .0841435     1.25   0.211    -.0597058    .2701425
       var14 |   1451.376   2280.098     0.64   0.524    -3017.696    5920.448
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              0.699
                                                   Chi-sq(1) P-val =    0.4032
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                3.169
                         (Kleibergen-Paap rk Wald F statistic):          0.138
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var9 var12 var15
Included instruments: var4 var8 var11 var14
Excluded instruments: var6 var7 var10 var13 var16
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      1967           1        1966     |
     user_id |     33241       33241           0    *|
          yh |        11           1          10     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. // 5) Close & export
. postclose handle

. use `out', clear

. export delimited using "`result_dir'/consolidated_results.csv", ///
>     replace delimiter(",") quote
file ../results/raw/user_mechanisms/consolidated_results.csv saved

. 
. display as result "→ CSV written to `result_dir'/consolidated_results.csv"
→ CSV written to ../results/raw/user_mechanisms/consolidated_results.csv

. capture log close

-----------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/saul/Dropbox/Remote Work Startups/main/spec/log/firm_mechanisms_wagegap.log
  log type:  text
 opened on:  28 May 2025, 04:53:10

. 
. // ---------------------------------------------------------------------------
. // 0) Globals + setup
. // ---------------------------------------------------------------------------
. do "../src/globals.do"

. global raw_data "../data/raw"

. global processed_data  "../data/processed"

. global results "../results/raw"

. global clean_results "../results/cleaned"

. 
. 
. 
end of do-file

. local result_dir "$results/`specname'"

. capture mkdir "`result_dir'"

. 
. // ---------------------------------------------------------------------------
. // 1) Load firm panel & create interactions
. // ---------------------------------------------------------------------------
. use "$processed_data/firm_panel.dta", clear

. gen seniority_4 = !inrange(seniority_levels,1,3)

. 
. // interactions with wage dispersion variables
. // ---- sd_wage ---------------------------------------------------------------
. gen var17 = covid * sd_wage
(399 missing values generated)

. gen var18 = covid * sd_wage * remote
(399 missing values generated)

. gen var19 = teleworkable * covid * sd_wage
(399 missing values generated)

. 
. // ---- p90_p10_gap -----------------------------------------------------------
. gen var20 = covid * p90_p10_gap
(37 missing values generated)

. gen var21 = covid * p90_p10_gap * remote
(37 missing values generated)

. gen var22 = teleworkable * covid * p90_p10_gap
(37 missing values generated)

. 
. // ---------------------------------------------------------------------------
. // 2) Postfile
. // ---------------------------------------------------------------------------
. capture postclose handle

. tempfile out

. postfile handle ///
>     str8   model_type  /// "OLS", "IV"
>     str244 spec        ///
>     str40  param       ///
>     double coef se pval pre_mean rkf nobs ///
>     using `out', replace
(file /var/folders/hg/s3xm9w393gxby64_zklmhgbc0000gn/T//S_39148.000001 not found)

. 
. // ---------------------------------------------------------------------------
. // 3) Specs
. // ---------------------------------------------------------------------------
. local specs "baseline sd_wage gap sd_wage_gap"

. 
. // OLS exogenous regressors
. local spec_ols_exog1  var4                                     // baseline

. local spec_ols_exog2  var4 var17 var18                         // sd_wage

. local spec_ols_exog3  var4 var20 var21                         // gap

. local spec_ols_exog4  var4 var17 var18 var20 var21             // sd_wage + gap

. 
. // IV exogenous regressors (drop 3-way terms)
. local spec_iv_exog1   var4

. local spec_iv_exog2   var4 var17

. local spec_iv_exog3   var4 var20

. local spec_iv_exog4   var4 var17 var20

. 
. // instruments
. local spec_instr1 var6 var7

. local spec_instr2 var6 var7 var19

. local spec_instr3 var6 var7 var22

. local spec_instr4 var6 var7 var19 var22

. 
. // endogenous vars (include 3-way terms)
. local spec_endo1  var3 var5

. local spec_endo2  var3 var5 var18

. local spec_endo3  var3 var5 var21

. local spec_endo4  var3 var5 var18 var21

. 
. // ---------------------------------------------------------------------------
. // 4) Baseline spec on full sample
. // ---------------------------------------------------------------------------
. display as text "→ Spec 1: baseline (full sample)"
→ Spec 1: baseline (full sample)

. 
. summarize growth_rate_we if covid == 0, meanonly

. local pre_mean = r(mean)

. 
. // 4a) OLS
. reghdfe growth_rate_we var3 var5 var4, absorb(firm_id yh) vce(cluster firm_id)
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     41,980
Absorbing 2 HDFE groups                           F(   3,   3507) =      24.67
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3488
                                                  Adj R-squared   =     0.2892
                                                  Within R-sq.    =     0.0055
Number of clusters (firm_id) =      3,508         Root MSE        =     0.1853

                            (Std. err. adjusted for 3,508 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0032223   .0046965     0.69   0.493    -.0059859    .0124305
        var5 |   .0699523   .0236946     2.95   0.003     .0234957     .116409
        var4 |   -.117261   .0211647    -5.54   0.000    -.1587573   -.0757646
       _cons |   .0998093   .0012425    80.33   0.000     .0973732    .1022453
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. local N = e(N)

. 
. foreach p in var3 var5 {
  2.     local b    = _b[`p']
  3.     local se   = _se[`p']
  4.     local t    = `b'/`se'
  5.     local pval = 2*ttail(e(df_r), abs(`t'))
  6.     post handle ("OLS") ("baseline") ("`p'") ///
>                 (`b') (`se') (`pval') (`pre_mean') ///
>                 (.) (`N')
  7. }

. 
. // 4b) IV
. ivreghdfe growth_rate_we (var3 var5 = var6 var7) var4, ///
>     absorb(firm_id yh) vce(cluster firm_id) savefirst
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
---------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+-------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          3  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          3  First-stage regression: var5
---------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3508                Number of obs =    41980
                                                      F(  3,  3507) =    22.94
                                                      Prob > F      =   0.0000
Total (centered) SS     =   1327.10484                Centered R2   =   0.0022
Total (uncentered) SS   =   1327.10484                Uncentered R2 =   0.0022
Residual SS             =  1324.192664                Root MSE      =    .1776

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   .0057809   .0093488     0.62   0.536    -.0125488    .0241105
        var5 |   .2088021   .1017564     2.05   0.040     .0092944    .4083098
        var4 |   -.236576   .0865024    -2.73   0.006     -.406176    -.066976
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             25.467
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):             1388.072
                         (Kleibergen-Paap rk Wald F statistic):         16.530
Stock-Yogo weak ID test critical values: 10% maximal IV size              7.03
                                         15% maximal IV size              4.58
                                         20% maximal IV size              3.95
                                         25% maximal IV size              3.63
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5
Included instruments: var4
Excluded instruments: var6 var7
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3508        3508           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local rkf = e(rkf)

. local N   = e(N)

. 
. foreach p in var3 var5 {
  2.     local b    = _b[`p']
  3.     local se   = _se[`p']
  4.     local t    = `b'/`se'
  5.     local pval = 2*ttail(e(df_r), abs(`t'))
  6.     post handle ("IV") ("baseline") ("`p'") ///
>                 (`b') (`se') (`pval') (`pre_mean') ///
>                 (`rkf') (`N')
  7. }

. 
. // ---------------------------------------------------------------------------
. // 5) Restrict to rows with wage-dispersion vars
. // ---------------------------------------------------------------------------
. drop if missing(rent, hhi_1000, seniority_4, sd_wage, p90_p10_gap)
(3,544 observations deleted)

. 
. // ---------------------------------------------------------------------------
. // 6) Loop over wage-dispersion specs (2..4)
. // ---------------------------------------------------------------------------
. 
. forvalues i = 2/4 {
  2.     local spec    : word `i' of `specs'
  3. 
.     local ols_exog "`spec_ols_exog`i''"
  4.     local iv_exog  "`spec_iv_exog`i''"
  5.     local instr    "`spec_instr`i''"
  6.     local endo     "`spec_endo`i''"
  7. 
.     display as text "→ Spec `i': `spec'"
  8. 
.     summarize growth_rate_we if covid == 0, meanonly
  9.     local pre_mean = r(mean)
 10. 
.     // OLS
.     reghdfe growth_rate_we var3 var5 `ols_exog', absorb(firm_id yh) vce(cluster firm_id)
 11.     local N = e(N)
 12. 
.     foreach p in var3 var5 {
 13.         local b    = _b[`p']
 14.         local se   = _se[`p']
 15.         local t    = `b'/`se'
 16.         local pval = 2*ttail(e(df_r), abs(`t'))
 17.         post handle ("OLS") ("`spec'") ("`p'") ///
>                     (`b') (`se') (`pval') (`pre_mean') ///
>                     (.) (`N')
 18.     }
 19. 
.     // IV
.     ivreghdfe growth_rate_we (`endo' = `instr') `iv_exog', absorb(firm_id yh) vce(cluster firm_id) savefirst
 20.     local rkf = e(rkf)
 21.     local N   = e(N)
 22. 
.     foreach p in var3 var5 {
 23.         local b    = _b[`p']
 24.         local se   = _se[`p']
 25.         local t    = `b'/`se'
 26.         local pval = 2*ttail(e(df_r), abs(`t'))
 27.         post handle ("IV") ("`spec'") ("`p'") ///
>                     (`b') (`se') (`pval') (`pre_mean') ///
>                     (`rkf') (`N')
 28.     }
 29. }
→ Spec 2: sd_wage
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     38,436
Absorbing 2 HDFE groups                           F(   5,   3206) =      18.50
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3524
                                                  Adj R-squared   =     0.2931
                                                  Within R-sq.    =     0.0069
Number of clusters (firm_id) =      3,207         Root MSE        =     0.1848

                            (Std. err. adjusted for 3,207 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0436116   .0130695    -3.34   0.001    -.0692371   -.0179862
        var5 |   .0664393   .0250799     2.65   0.008     .0172651    .1156135
        var4 |  -.1188131   .0223884    -5.31   0.000    -.1627101   -.0749161
       var17 |  -5.48e-07   3.26e-07    -1.68   0.093    -1.19e-06    9.14e-08
       var18 |   1.80e-06   5.14e-07     3.51   0.000     7.95e-07    2.81e-06
       _cons |   .1078674   .0034394    31.36   0.000     .1011238    .1146111
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3207        3207           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          5  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          5  First-stage regression: var5
_ivreg2_v~18 | ivreg2        var18          5  First-stage regression: var18
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3207                Number of obs =    38436
                                                      F(  5,  3206) =    17.01
                                                      Prob > F      =   0.0000
Total (centered) SS     =   1211.55256                Centered R2   =   0.0056
Total (uncentered) SS   =   1211.55256                Uncentered R2 =   0.0056
Residual SS             =  1204.714966                Root MSE      =    .1771

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0732597   .0362498    -2.02   0.043    -.1443349   -.0021845
        var5 |    .135586   .1003095     1.35   0.177    -.0610911    .3322632
       var18 |   3.29e-06   1.50e-06     2.19   0.028     3.46e-07    6.23e-06
        var4 |  -.1803858   .0860268    -2.10   0.036    -.3490589   -.0117126
       var17 |  -1.69e-06   1.07e-06    -1.58   0.115    -3.80e-06    4.10e-07
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             21.368
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              808.953
                         (Kleibergen-Paap rk Wald F statistic):          9.352
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var18
Included instruments: var4 var17
Excluded instruments: var6 var7 var19
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3207        3207           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 3: gap
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     38,436
Absorbing 2 HDFE groups                           F(   5,   3206) =      19.38
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3525
                                                  Adj R-squared   =     0.2933
                                                  Within R-sq.    =     0.0072
Number of clusters (firm_id) =      3,207         Root MSE        =     0.1848

                            (Std. err. adjusted for 3,207 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0412312   .0115859    -3.56   0.000    -.0639477   -.0185147
        var5 |   .0658585   .0250831     2.63   0.009     .0166779    .1150391
        var4 |  -.1186479   .0224062    -5.30   0.000    -.1625798   -.0747159
       var20 |  -2.18e-07   1.21e-07    -1.80   0.073    -4.56e-07    1.99e-08
       var21 |   7.61e-07   1.97e-07     3.87   0.000     3.75e-07    1.15e-06
       _cons |   .1073116    .003047    35.22   0.000     .1013374    .1132858
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3207        3207           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          5  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          5  First-stage regression: var5
_ivreg2_v~21 | ivreg2        var21          5  First-stage regression: var21
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3207                Number of obs =    38436
                                                      F(  5,  3206) =    17.80
                                                      Prob > F      =   0.0000
Total (centered) SS     =   1211.55256                Centered R2   =   0.0059
Total (uncentered) SS   =   1211.55256                Uncentered R2 =   0.0059
Residual SS             =  1204.388686                Root MSE      =    .1771

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0424662   .0284413    -1.49   0.136    -.0982313    .0132988
        var5 |   .1487599   .0999357     1.49   0.137    -.0471846    .3447043
       var21 |   8.76e-07   4.98e-07     1.76   0.078    -9.98e-08    1.85e-06
        var4 |  -.1913065   .0857879    -2.23   0.026    -.3595112   -.0231018
       var20 |  -3.20e-07   3.57e-07    -0.90   0.370    -1.02e-06    3.80e-07
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             21.564
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              830.488
                         (Kleibergen-Paap rk Wald F statistic):          9.560
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var21
Included instruments: var4 var20
Excluded instruments: var6 var7 var22
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3207        3207           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
→ Spec 4: sd_wage_gap
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     38,436
Absorbing 2 HDFE groups                           F(   7,   3206) =      14.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.3526
                                                  Adj R-squared   =     0.2933
                                                  Within R-sq.    =     0.0072
Number of clusters (firm_id) =      3,207         Root MSE        =     0.1848

                            (Std. err. adjusted for 3,207 clusters in firm_id)
------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |  -.0402248   .0135817    -2.96   0.003    -.0668545   -.0135951
        var5 |   .0658151   .0251267     2.62   0.009     .0165491    .1150811
        var4 |  -.1185353   .0224538    -5.28   0.000    -.1625607     -.07451
       var17 |  -2.25e-07   1.13e-06    -0.20   0.842    -2.44e-06    1.99e-06
       var18 |  -1.62e-07   1.54e-06    -0.11   0.916    -3.18e-06    2.85e-06
       var20 |  -1.43e-07   4.16e-07    -0.34   0.730    -9.59e-07    6.73e-07
       var21 |   8.20e-07   5.79e-07     1.42   0.157    -3.15e-07    1.95e-06
       _cons |   .1078192    .003653    29.52   0.000     .1006567    .1149817
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3207        3207           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(MWFE estimator converged in 4 iterations)

Stored estimation results
-------------------------
----------------------------------------------------------------------------
             |           Dependent  Number of        
        Name | Command    variable     param.  Title 
-------------+--------------------------------------------------------------
_ivreg2_var3 | ivreg2         var3          7  First-stage regression: var3
_ivreg2_var5 | ivreg2         var5          7  First-stage regression: var5
_ivreg2_v~18 | ivreg2        var18          7  First-stage regression: var18
_ivreg2_v~21 | ivreg2        var21          7  First-stage regression: var21
----------------------------------------------------------------------------

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on firm_id

Number of clusters (firm_id) =    3207                Number of obs =    38436
                                                      F(  7,  3206) =    13.48
                                                      Prob > F      =   0.0000
Total (centered) SS     =   1211.55256                Centered R2   =   0.0053
Total (uncentered) SS   =   1211.55256                Uncentered R2 =   0.0053
Residual SS             =  1205.089871                Root MSE      =    .1771

------------------------------------------------------------------------------
             |               Robust
growth_rat~e | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        var3 |   -.067691   .0367109    -1.84   0.065    -.1396703    .0042883
        var5 |   .1371727   .1005939     1.36   0.173    -.0600623    .3344076
       var18 |   6.80e-06   5.08e-06     1.34   0.181    -3.17e-06    .0000168
       var21 |  -1.62e-06   1.84e-06    -0.88   0.380    -5.23e-06    1.99e-06
        var4 |  -.1814022   .0862797    -2.10   0.036    -.3505712   -.0122331
       var17 |  -5.72e-06   3.81e-06    -1.50   0.133    -.0000132    1.75e-06
       var20 |   1.75e-06   1.38e-06     1.27   0.206    -9.59e-07    4.45e-06
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             20.973
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              586.495
                         (Kleibergen-Paap rk Wald F statistic):          6.760
Stock-Yogo weak ID test critical values:                       <not available>
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         var3 var5 var18 var21
Included instruments: var4 var17 var20
Excluded instruments: var6 var7 var19 var22
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
     firm_id |      3207        3207           0    *|
          yh |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. // ---------------------------------------------------------------------------
. // 7) Export CSV
. // ---------------------------------------------------------------------------
. postclose handle

. use `out', clear

. export delimited using "`result_dir'/consolidated_results.csv", ///
>     replace delimiter(",") quote
(file ../results/raw/firm_mechanisms_wagegap/consolidated_results.csv not found)
file ../results/raw/firm_mechanisms_wagegap/consolidated_results.csv saved

. 
. display as result "→ CSV written to `result_dir'/consolidated_results.csv"
→ CSV written to ../results/raw/firm_mechanisms_wagegap/consolidated_results.csv

. capture log close
